import numpy as np

text_mat = "1000000000000000000000001 0111000101000110000100000 0100000000000000000000010 1101101000001110001000000 0010000000000000000000011 1011110110001101111101000 0001000000000000000000010 1110001000000000100011100 0000100000000000000000001 0110110000101010010111000 0000010000000000000000011 0010101101001000001100000 0000001000000000000000000 0101011011000101110001000 0000000100000000000000011 1010010110000011010110100 0000000010000000000000000 0010001110100111001001100 0000000001000000000000011 1000011000101010110100100 0000000000100000000000010 0000100011001011111001000 0000000000010000000000010 0000000000000000100011100 0000000000001000000000000 0110110001101100010011000 0000000000000100000000010 1110001010001110001000000 0000000000000010000000010 1100100111100111101010000 0000000000000001000000011 0010001110100011010110100 0000000000000000100000000 0011001001110010111000100 0000000000000000010000011 0010101101101001101110000 0000000000000000001000000 0110010010100110111000100 0000000000000000000100011 1010110101000001010110100 0000000000000000000010001 0001100100011011010111000 0000000000000000000001010 0011101010111000000011100 0000000000000000000000111 0001000111010001101101000 0000000000000000000000000 0111010101110111010101110 0000000000000000000000000 1010110101000001010110101"
quiet = '0111010101110111010101110 1010110101000001010110101'
quiet_list = quiet.split(' ')
invariant_pattern = [[int(c) for c in i] for i in quiet_list]
invariant_pattern.append([x^y for (x,y) in zip(invariant_pattern[0], invariant_pattern[1])])
text_list = text_mat.split(' ')
bin_list = [[text_list[i][:23]] for i in range(1,len(text_list)-3,2)]
pinv_5 = [[int(c) for c in i[0]] for i in bin_list]
pinv_5 = np.array(pinv_5)
invariant_pattern = np.array(invariant_pattern)

text_6 = """
1&0&1&0&1&1&0&0&1&0&0&0&1&1&0&1&1&1&0&0&1&0&1&0&1&0&1&1&0&0&1&0&1&0&0&0\\
0&0&0&0&1&1&0&1&0&1&0&0&1&1&0&1&0&1&0&1&0&0&0&1&0&0&1&1&1&0&0&0&0&1&0&0\\
1&0&1&1&0&0&1&0&1&0&1&0&0&0&0&1&1&1&1&0&0&0&0&0&1&1&0&1&1&1&1&0&0&0&1&0\\
0&0&1&1&0&1&0&1&0&1&0&1&1&1&1&0&0&0&0&0&0&0&0&1&1&1&1&0&1&1&0&1&0&0&0&1\\
1&1&0&0&0&0&0&0&1&0&1&0&1&0&1&0&1&1&1&0&0&0&1&0&0&1&1&1&0&0&0&0&1&0&0&0\\
1&1&0&1&0&1&0&0&0&1&0&0&1&1&1&0&1&1&0&1&0&1&0&0&0&0&1&1&0&1&0&0&0&1&0&1\\
0&0&1&0&0&0&0&1&1&1&0&0&0&0&0&0&1&0&0&1&1&0&1&1&1&0&0&0&1&0&1&0&1&1&0&0\\
0&1&0&1&0&0&1&1&0&1&1&0&0&0&0&1&0&1&1&1&1&0&1&1&0&1&0&1&0&1&0&0&1&1&1&0\\
1&0&1&0&1&0&1&0&1&0&1&1&0&0&1&0&1&0&1&1&0&0&0&0&0&0&0&0&1&0&1&1&0&1&1&1\\
0&1&0&1&0&1&1&1&0&1&0&1&0&1&0&1&0&0&0&0&0&0&1&1&0&1&0&0&0&0&1&1&1&0&1&1\\
0&0&1&0&1&0&0&1&1&0&1&1&1&0&1&0&0&0&1&1&0&1&1&1&1&0&1&0&1&0&0&1&1&1&0&0\\
0&0&0&1&0&0&0&0&1&1&1&0&0&1&0&0&0&0&1&1&0&1&1&0&0&1&0&0&0&1&0&0&1&1&0&1\\
1&1&0&1&1&1&0&0&0&0&1&0&1&1&0&0&0&0&1&0&1&0&1&0&0&1&1&0&1&1&0&0&1&0&1&0\\
1&1&0&1&0&1&0&0&0&1&0&1&1&1&1&0&0&0&0&0&0&0&0&1&1&1&1&0&1&1&0&1&0&0&0&1\\
0&0&0&1&1&1&0&0&1&0&1&0&0&1&1&1&0&0&1&0&1&0&0&0&1&1&0&0&0&0&1&0&0&0&0&0\\
1&1&1&0&0&0&0&1&0&1&0&0&0&0&1&1&1&0&0&0&0&1&0&1&0&0&0&0&1&1&0&0&0&0&0&1\\
1&0&1&0&1&1&1&0&1&0&0&0&0&0&0&1&1&1&1&0&0&0&0&0&1&1&0&1&1&1&1&0&0&0&1&0\\
1&1&1&0&1&1&0&1&0&0&0&0&0&0&0&0&1&1&0&1&0&1&0&1&1&1&0&1&1&0&0&1&0&1&0&0\\
0&0&1&0&1&0&0&1&1&0&1&1&1&0&1&0&1&0&1&1&0&0&0&0&0&0&0&0&1&0&1&1&0&1&1&1\\
0&1&0&0&0&1&1&1&1&0&1&1&0&0&0&0&0&1&1&1&1&0&0&0&0&0&0&1&0&1&1&1&0&1&0&1\\
1&0&0&0&0&0&1&1&0&0&0&0&1&0&1&0&0&0&0&1&1&1&0&0&0&0&1&0&1&0&0&0&0&1&1&1\\
0&0&0&0&0&1&0&0&0&0&1&1&0&0&0&1&0&1&0&0&1&1&1&0&0&1&0&1&0&0&1&1&1&0&0&0\\
1&0&0&0&1&0&1&1&0&1&1&1&1&0&0&0&0&0&0&0&0&1&1&1&1&0&1&0&0&0&1&0&1&0&1&1\\
0&1&0&1&0&0&1&1&0&1&1&0&0&1&0&1&0&1&0&0&0&0&1&1&0&1&0&0&0&0&1&1&1&0&1&1\\
1&0&1&1&0&0&1&0&0&0&1&0&0&1&1&0&1&1&0&0&0&0&1&0&0&1&1&1&0&0&0&0&1&0&0&0\\
0&0&1&1&1&0&0&1&0&1&0&1&1&1&1&0&1&1&0&0&0&1&0&1&1&1&0&1&1&0&0&1&0&1&0&0\\
1&1&0&1&1&1&0&0&0&0&1&0&1&1&0&0&0&0&0&0&1&0&1&0&1&0&1&0&1&1&1&0&1&0&1&0\\
1&1&1&0&1&1&0&1&0&0&0&0&0&0&0&0&1&1&0&1&0&1&0&0&1&1&0&1&0&1&0&1&0&1&0&1\\
0&1&1&1&0&0&1&0&1&0&1&0&1&1&0&1&1&1&1&0&1&0&0&0&0&1&1&0&1&1&0&0&1&0&1&0\\
0&0&1&1&0&1&0&1&0&0&0&1&1&1&0&1&1&0&0&1&0&0&0&0&0&0&1&1&1&0&0&0&0&1&0&0\\
1&0&1&0&0&0&1&0&1&1&0&0&0&0&1&0&1&0&1&1&0&1&1&1&0&0&1&0&0&0&1&0&1&0&1&1\\
0&0&0&1&0&0&0&0&1&1&1&0&0&1&0&0&0&1&1&1&0&1&0&1&0&1&0&1&0&0&0&0&0&0&1&1\\
1&0&0&0&1&0&1&1&0&1&1&1&1&0&0&0&0&0&0&0&0&1&1&1&1&0&1&0&1&0&1&0&1&1&0&0\\
0&1&0&0&0&1&1&1&1&0&1&1&0&0&0&0&0&1&1&1&1&0&0&0&0&1&0&1&0&1&0&0&1&1&0&1\\
0&0&1&0&0&0&0&1&1&1&0&0&1&0&0&0&1&0&1&0&1&0&1&1&0&0&1&0&1&0&1&1&0&0&0&0\\
0&0&0&1&0&1&0&0&1&1&0&1&0&1&0&1&0&0&1&1&1&0&1&1&0&0&0&1&0&0&1&1&0&1&0&1"""

text_6 = text_6.replace('&','')
text_6 = text_6.replace('\n', ' ')
text_6 = text_6.replace('\\', '')

text_6list = text_6.split(' ')
b_list = [[text_6list[i][:23]] for i in range(1,len(text_6list)-3,2)]
inv_6 = [[int(c) for c in i[0]] for i in b_list]
inv_6 = np.array(inv_6)


def solver_6(list_of_list):
    x = np.array([x for y in list_of_list for x in y]) @ inv_6
    return [int(c)%2 for c in x]


# Solution for Auto Solver 3 by 3
def solver_3(list_of_list):
    inv_mat = np.array([[1,0,1,0,0,1,1,1,0],[0,0,0,0,1,0,1,1,1],[1,0,1,1,0,0,0,1,1],[0,0,1,0,1,1,0,0,1],[0,1,0,1,1,1,0,1,0],[1,0,0,1,1,0,1,0,0],[1,1,0,0,0,1,1,0,1],[1,1,1,0,1,0,0,0,0],[0,1,1,1,0,0,1,0,1]])
    x = np.array([x for y in list_of_list for x in y]) @ inv_mat
    return [int(c)%2 for c in x]

def solver_5(lis):
    np_list = np.array([x for y in lis for x in y])
    solution1 = np_list[:23] @ pinv_5
    solution1 = [int(c) % 2 for c in solution1]+[0,0]
    solution = []
    solution.append(solution1)
    for c in invariant_pattern:
        solution.append([x^y for (x,y) in zip(solution1, c)])
    sum_list = list(map(sum, solution))
    
    index = sum_list.index(min(sum_list))
    return solution[index]

file  =open('sia.txt', 'r')
text_60 = file.read()
text_60 = text_60.replace('&','')
text_60 = text_60.replace('\n', ' ')
text_60 = text_60.replace('\\', '')
text60_list = text_60.split('       ')
inv_60 = [[int(c) for c in i] for i in text60_list]
inv_60 = np.array(inv_60)

def solver_60(list_of_list):
    x = inv_60 @ np.array([x for y in list_of_list for x in y])
    return [int(c)%2 for c in x]